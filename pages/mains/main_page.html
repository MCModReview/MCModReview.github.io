<!DOCTYPE html>
<html>
    <head>
    <base href="/">
    <meta name="viewport" content="width-device-width-initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles/navbar.css">
    <link rel="stylesheet" type="text/css" href="styles/slideshow_mainpage.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="styles/fonts/roboto/roboto.css">
    <link rel="stylesheet" type="text/css" href="styles/card_base.css">

    <link rel="stylesheet" type="text/css" href="styles/util.css">

    <!-- Roboto Font Code -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
      body {
        color: white;
      }

      .cards_posts_container {
        display: flex;
        flex-direction: row;
      }
    </style>
  </head>
  <body class="roboto-roboto">
    <div class="slideshow-container" style="width: 100%;">

      <div class="mySlides fade">
        <div style="width: 100%; height: 500px; background-color: black;">
          <table style="
            width: 100%; 
            height: 100%; 
            border: none; 
            margin: 0; 
            border-spacing: 0; 
            background:
                  radial-gradient(
                    circle at 70% 50%,
                  rgba(0, 47, 115, 0.4) 0%,
                  transparent 70%
                ),
                linear-gradient(
                to top,
                  #002f73 30%,   /* solid navy covering bottom 30% */
                #000000 100%   /* pure black above */
                );
            border-collapse: separate; /* Important */
            border-radius: 12px;       /* Adjust as needed */
            overflow: hidden;          /* Ensures child content clips to radius */
            border-style: solid;
            border-color: rgb(0, 167, 167);">
            <tr>
              <!-- Left cell -->
              <th style="
                color: white; 
                width: 65%; 
                text-align: left; 
                padding: 20px; /* optional padding */
              ">
                <h1 style="margin-left: 3vw; width: 94.5%;">
                  Find concise and detailed mod reviews that showcase all features of new mods, while keeping out unneeded info.
                </h1>
              </th>
        
              <!-- Right cell with image -->
              <th style="
                color: white; 
                
                text-align: center; 
                vertical-align: middle; 
                padding: 20px; /* optional padding */
              ">
                <img 
                  src="https://mcmodreview.github.io/images/logo_without_text.png" 
                  style="
                    max-width: 70%; 
                    height: auto; 
                    display: block; 
                    margin: 0 auto;
                  ">
              </th>
            </tr>
          </table>
        </div>
      </div>
      <div class="mySlides fade">
        <div style="width: 100%; height: 500px; background-color: black;">
          <table style="
            width: 100%; 
            height: 100%; 
            border: none; 
            margin: 0; 
            border-spacing: 0; 
            background:
                  radial-gradient(
                    circle at 70% 50%,
                  rgba(0, 47, 115, 0.4) 0%,
                  transparent 70%
                ),
                linear-gradient(
                to top,
                  #002f73 30%,   /* solid navy covering bottom 30% */
                #000000 100%   /* pure black above */
                );
            border-collapse: separate; /* Important */
            border-radius: 12px;       /* Adjust as needed */
            overflow: hidden;          /* Ensures child content clips to radius */
            border-style: solid;
            border-color: rgb(0, 167, 167);">
            <tr>
              <!-- Left cell -->
              <th style="
                color: white; 
                width: 65%; 
                text-align: left; 
                padding: 20px; /* optional padding */
              ">
                <h1 style="margin-left: 3vw; width: 94.5%;">
                  View the difficulty, mod list and features of the modpacks you like. Just select a filter!
                </h1>
              </th>
        
              <!-- Right cell with image -->
              <th style="
                color: white; 
                
                text-align: center; 
                vertical-align: middle; 
                padding: 20px; /* optional padding */
              ">
                <img 
                  src="https://mcmodreview.github.io/images/cog.png" 
                  style="
                    max-width: 70%; 
                    height: auto; 
                    display: block; 
                    margin: 0 auto;
                    height: 300px;
                    width: 300px;
                  "
                  class="no_smooth">
              </th>
            </tr>
          </table>
        </div>
      </div>
      <a class="prev" onclick="plusSlides(-1)">❮</a>
      <a class="next" onclick="plusSlides(1)">❯</a>
    </div>

    <div id="latest-posts" class="posts_container">
    <h1 style="text-align: center;">Latest Posts</h1>
    <div class="cards_posts_container obj_center_align">
        <div id="card1" class="card obj_round_corner">
            <img src="img_avatar.png" alt="Avatar">
            <div class="container">
                <h4><b>John Doe</b></h4>
                <p>Architect & Engineer</p>
            </div>
        </div>
        <div id="card2"class="card obj_round_corner">
            <img src="img_avatar.png" alt="Avatar" style="width:100%">
            <div class="container">
                <h4><b>John Doe</b></h4>
                <p>Architect & Engineer</p>
            </div>
        </div>
        <div id="card3" class="card obj_round_corner">
            <img src="img_avatar.png" alt="Avatar" style="width:100%">
            <div class="container">
                <h4><b>John Doe</b></h4>
                <p>Architect & Engineer</p>
            </div>
        </div>
    </div>
</div>


    <script>
      
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides(slideIndex += n);
      }

      function currentSlide(n) {
        showSlides(slideIndex = n);
      }

      function showSlides(n) {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        //let dots = document.getElementsByClassName("dot");
        if (n > slides.length) {slideIndex = 1}    
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";  
        }
        //for (i = 0; i < dots.length; i++) {
        //  dots[i].className = dots[i].className.replace(" active", "");
        //}
        slides[slideIndex-1].style.display = "block";  
        //dots[slideIndex-1].className += " active";
    }
  </script>
  <script>
    async function loadPostMetadata(file) {
      try {
        const res = await fetch(file);
  
        if (!res.ok) {
          throw new Error(`Failed to load post file: ${file}`);
        }
  
        const text = await res.text();
        const doc = new DOMParser().parseFromString(text, "text/html");
  
        const json = doc.getElementById("post-metadata")?.textContent;
  
        if (!json) {
          throw new Error(`No post metadata found in: ${file}`);
        }
  
        const metadata = JSON.parse(json);
  
        // Ensure imageWidth and imageHeight exist in metadata, default to '75%' if not present
        metadata.imageWidth = metadata.imageWidth || '75%';
        metadata.imageHeight = metadata.imageHeight || 'auto'; // Default height to 'auto'
  
        return metadata;
      } catch (error) {
        console.error(error); // Log the error to the console
        return null; // Return null to continue processing the other posts
      }
    }
  
    async function loadLatestPosts() {
      const postFiles = [
        "pages/posts/exampali_mexampaly.html",
        "posts/post2.html",
        "posts/post3.html"
      ];
  
      const cardIds = ["card1", "card2", "card3"];
  
      for (let i = 0; i < postFiles.length; i++) {
        const file = postFiles[i];
        const metadata = await loadPostMetadata(file);
  
        if (!metadata) {
          console.warn(`Skipping post ${file} due to an error in metadata.`);
          continue; // Skip this post and move to the next one
        }
  
        const card = document.getElementById(cardIds[i]);
        if (card) {
          const imageWidth = metadata.imageWidth;
          const imageHeight = metadata.imageHeight;
  
          card.innerHTML = `
            <img src="${metadata.image}" alt="${metadata.title}" style="width:${imageWidth}; height:${imageHeight};">
            <div class="container">
              <h4><b>${metadata.title}</b></h4>
              <p>${metadata.excerpt}</p>
            </div>
          `;
        }
      }
    }
  
    // Load posts after the page has loaded
    window.onload = loadLatestPosts;
  </script>
  </body>
</html>